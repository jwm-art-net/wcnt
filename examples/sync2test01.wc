wcnt-1.2/jwmsynth
//------------------------------------------------------------------------
//
// sync2test.wc
//  uses sync_clock2 modules which include modulation.  creates an 
//  ever-lasting pattern.
//
//------------------------------------------------------------------------

header header.wch

// get a timemap from time.wch

synth_file_reader
timefile
    filename time.wch
    mod_action  exclude
    dobj_action exclude
    modules // empty list so nothing's excluded
    modules
    data_objects // ditto above
    data_objects
timefile

//------------------------------------------------------------------------

sync_clock
clock1
    in_bpm              time1 out_bpm
    in_pos_step_size    time1 out_pos_step_size
    in_beats_per_bar    time1 out_beats_per_bar
    in_beat_value       time1 out_beat_value
    in_phase_trig       off
    in_freq_mod1        off
    in_freq_mod2        off
    freq_mod1_size  1.0
    freq_mod2_size  1.0
    quarter_value   8
    len             32
    snap_to         1
clock1

sine_wave
l8rz1
    in_phase_trig  clock1 out_phase_trig
    in_deg_size    clock1 out_deg_size
    recycle_mode         off
    on_trig_reset_phase  off
    phase_cycles         1.0
l8rz1

sync_clock
clock2
    in_bpm              time1 out_bpm
    in_pos_step_size    time1 out_pos_step_size
    in_beats_per_bar    time1 out_beats_per_bar
    in_beat_value       time1 out_beat_value
    in_phase_trig       off
    in_freq_mod1        off
    in_freq_mod2        off
    freq_mod1_size  1.0
    freq_mod2_size  1.0
    quarter_value   8
    len             64
    snap_to         1
clock2

sine_wave
l8rz2
    in_phase_trig  clock2 out_phase_trig
    in_deg_size    clock2 out_deg_size
    recycle_mode         off
    on_trig_reset_phase  off
    phase_cycles         1.0
l8rz2

sync_clock
sclock
    in_bpm              time1 out_bpm
    in_pos_step_size    time1 out_pos_step_size
    in_beats_per_bar    time1 out_beats_per_bar
    in_beat_value       time1 out_beat_value
    in_phase_trig       off
    in_freq_mod1        off
    in_freq_mod2        off
    freq_mod1_size  1.0
    freq_mod2_size  1.0
    quarter_value   8
    len             2
    snap_to         1
sclock

sync_clock
sclock2
    in_bpm              time1 out_bpm
    in_pos_step_size    time1 out_pos_step_size
    in_beats_per_bar    time1 out_beats_per_bar
    in_beat_value       time1 out_beat_value
    in_phase_trig       off
    in_freq_mod1        l8rz1 out_output
    in_freq_mod2        l8rz2 out_output
    freq_mod1_size  2.0
    freq_mod2_size  2.0
    quarter_value   16
    len             16
    snap_to         1
sclock2

logic_trigger
p^
    in_trig1 sclock  out_phase_trig
    in_trig2 sclock2 out_phase_trig
    function and
    precision 1
p^

adsr
adsr1
        envelope
        section name attack
            ut  2.0    ul  1.0
            lt  2.0    ll  1.0
        section name decay
            ut  15.0    ul  0.68
            lt  15.0    ll  0.68
        section name release
            ut  15.0    ul  0.25
            lt  15.0    ll  0.25
        section name release
            ut  20.0    ul  0.0
            lt  20.0    ll  0.0
        envelope
        in_note_on_trig     sclock out_phase_trig
        in_note_off_trig    off
        in_velocity         off
        up_thresh        1.0
        lo_thresh        0.0
        start_level      0.0
        min_time         75.0
        max_sustain_time 0.0
        release_is_ratio off
        sustain_state    off
        zero_retrigger   off
adsr1

adsr
adsr2
        envelope
        section name attack
            ut  2.0    ul  1.0
            lt  2.0    ll  1.0
        section name decay
            ut  15.0    ul  0.68
            lt  15.0    ll  0.68
        section name release
            ut  15.0    ul  0.25
            lt  15.0    ll  0.25
        section name release
            ut  20.0    ul  0.0
            lt  20.0    ll  0.0
        envelope
        in_note_on_trig     sclock2 out_phase_trig
        in_note_off_trig    off
        in_velocity         off
        up_thresh        1.0
        lo_thresh        0.0
        start_level      0.0
        min_time         75.0
        max_sustain_time 0.0
        release_is_ratio off
        sustain_state    off
        zero_retrigger   off
adsr2

adsr
p^adsr
        envelope
        section name attack
            ut  5.0    ul  0.9
            lt  5.0    ll  0.9
        section name decay
            ut  10.0    ul  0.8
            lt  10.0    ll  0.8
        section name release
            ut  15.0    ul  0.25
            lt  15.0    ll  0.25
        section name release
            ut  25.0    ul  0.0
            lt  25.0    ll  0.0
        envelope
        in_note_on_trig     p^ out_trig
        in_note_off_trig    off
        in_velocity         off
        up_thresh        1.0
        lo_thresh        0.0
        start_level      1.0
        min_time         50.0
        max_sustain_time 0.0
        release_is_ratio off
        sustain_state    off
        zero_retrigger   off
p^adsr

constant freq value 220 freq

sample_hold
sh1
    in_trig    sclock out_phase_trig
    in_signal  l8rz1 out_output
    decay_time  0.0
sh1

sample_hold
sh2
    in_trig    sclock2 out_phase_trig
    in_signal  l8rz1 out_output
    decay_time  0.0
sh2

osc_clock
osc1
        in_note_on_trig     sclock out_phase_trig
        in_note_slide_trig  off
        in_play_state       off
        in_frequency        freq out_output
        in_freq_mod1        sh1 out_output
        in_freq_mod2        p^adsr out_output
        octave_offset       0
        tuning_semitones    0
        portamento_time     0.0
        response_time       0.0
        freq_mod1_size      2.0
        freq_mod2_size      2.0
osc1

osc_clock
osc2
        in_note_on_trig     sclock2 out_phase_trig
        in_note_slide_trig  off
        in_play_state       off
        in_frequency        freq out_output
        in_freq_mod1        sh2 out_output
        in_freq_mod2        p^adsr out_output
        octave_offset       0
        tuning_semitones    0
        portamento_time     0.0
        response_time       0.0
        freq_mod1_size      2.0
        freq_mod2_size      2.0
osc2

sine_wave
sine1
    in_phase_trig  osc1 out_phase_trig
    in_deg_size    osc1 out_deg_size
    recycle_mode         off
    on_trig_reset_phase  off
    phase_cycles         1.0
sine1

sine_wave
sine2
    in_phase_trig  osc2 out_phase_trig
    in_deg_size    osc2 out_deg_size
    recycle_mode         off
    on_trig_reset_phase  off
    phase_cycles         1.0
sine2

mono_amp
amp1
    in_signal   sine1 out_output
    in_amp_eg   adsr1  out_output
    in_amp_mod  off
    amplitude     32000
    amp_mod_size  0.0
    clip_level    32767
amp1

mono_amp
amp2
    in_signal   sine2 out_output
    in_amp_eg   adsr2 out_output
    in_amp_mod  off
    amplitude     32000
    amp_mod_size  0.0
    clip_level    32767
amp2

wavfile_out
wav1
    in_left     amp1    out_mono
    in_right    amp2    out_mono
    in_bar      time1   out_bar
    in_bar_trig time1   out_bar_trig
    filename    sync2test01.wav
    start_bar   0
    end_bar     11
wav1

// setup how long to process:

wcnt_exit
wcnt_exit_module
    in_bar  time1   out_bar
    exit_bar    11
wcnt_exit_module

//------------------------------------------------------------------------
// End Of File _jwm 2005.
//------------------------------------------------------------------------
wcnt-1.2/jwmsynth
